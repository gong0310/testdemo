(function(){var e={1983:function(e,t,s){"use strict";var i=s(6369),a=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},n=[],o={name:"App",components:{},data(){return{}},mounted(){function e(){WeixinJSBridge.call("hideOptionMenu")}"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",e,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",e),document.attachEvent("onWeixinJSBridgeReady",e)):e()},methods:{}},r=o,c=s(3736),l=(0,c.Z)(r,a,n,!1,null,null,null),u=l.exports,d=s(2631),h=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login"},[t("div",{staticClass:"login-container"},[t("div",{staticClass:"login-form"},[t("p",{staticClass:"login-form-title"},[e._v("手机验证码登录")]),t("div",{staticClass:"login-form-item"},[t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.loginForm.account,expression:"loginForm.account",modifiers:{trim:!0}}],attrs:{type:"number",name:"account",placeholder:"请输入手机号"},domProps:{value:e.loginForm.account},on:{input:[function(t){t.target.composing||e.$set(e.loginForm,"account",t.target.value.trim())},function(t){return e.handleInput("account",t)}],blur:function(t){return e.$forceUpdate()}}}),t("p",{directives:[{name:"show",rawName:"v-show",value:e.loginRules.account.showIndex,expression:"loginRules.account.showIndex"}],staticClass:"login-form-item-error"},[e._v(" "+e._s(e.loginRules.account.tips[e.loginRules.account.showIndex])+" ")])]),t("div",{staticClass:"login-form-item"},[t("div",{staticClass:"login-form-code"},[t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.loginForm.code,expression:"loginForm.code",modifiers:{trim:!0}}],attrs:{type:"number",name:"code",placeholder:"请输入验证码"},domProps:{value:e.loginForm.code},on:{input:[function(t){t.target.composing||e.$set(e.loginForm,"code",t.target.value.trim())},function(t){return e.handleInput("code",t)}],blur:function(t){return e.$forceUpdate()}}}),t("button",{class:e.codeInfo.disabled?"login-form-code-disabled":"",on:{click:e.handleSendCodeValidate}},[e._v(" "+e._s(e.codeInfo.tips)+" ")])]),t("p",{directives:[{name:"show",rawName:"v-show",value:e.loginRules.code.showIndex,expression:"loginRules.code.showIndex"}],staticClass:"login-form-item-error"},[e._v(" "+e._s(e.loginRules.code.tips[e.loginRules.code.showIndex])+" ")])]),t("button",{staticClass:"login-form-submit",on:{click:e.handleLogin}},[e._v("登录")])])])])},m=[],f=(s(2801),s(3029)),g=s(5743),p=s.n(g),_=s(4161),v=s(2229),A=s.n(v),I=s(6581),w=s(6681);s(7658);const y=function(e,t){const s={};return e.forEach((e=>{const i=e[t];s[i]=e})),s},k=50,C=3,b=6,T="kf_a_tk",x="kt_r_tk",E="在线客服",L="请输入您想咨询的问题",M={zfb:"ZFB",wx:"WX",union:"UNION",digital:"DIGITAL",wxQrocode:"WXQRCODE"},S=[{value:M.zfb,label:"支付宝"},{value:M.wx,label:"微信"},{value:M.union,label:"银联"},{value:M.digital,label:"数币"},{value:M.wxQrocode,label:"微信乘车码"}],R=y(S,"value"),P={next:1,prev:2},U={attachment:"ATTACHMENT",image:"IMAGE"},B={hotIssues:"hotIssues",roundTip:"roundTip",defaultTip:"defaultTip",marginTip:"marginTip",switchKfBtn:"switchKfBtn",hangUpCard:"hangUpCard",evaluate:"evaluate",leaveMsg:"leaveMsg",leaveMsgBtn:"leaveMsgBtn",relatedIssues:"relatedIssues",user:"user",staff:"staff",robot:"robot"},H={text:"TEXT",image:"IMAGE",ride:"RIDE_RECORD",auto:"auto"},N={staff:"STAFF",user:"USER"},Y={init:"ROBOT",inqueue:"INQUEUE",success:"SUCCESS",transfer:"TRANSFER",fail:"FAIL",evaluate:"EVALUATE"},O=(e,t)=>{switch(console.log("errorHandle",e,t),e){case 401:return t||"未授权";case 403:return t||"拒绝访问";case 404:return t||"请求的资源不存在";default:return t||"接口解析错误"}};let D=!1,Q=[];const Z=async()=>{let e;try{e=await z()}catch(t){return void Z()}fe.setItem({name:T,value:e.token,expires:1e3*e.token_expire_unix}),fe.setItem({name:x,value:e.token_refresh_unix,expires:1e3*e.token_refresh_unix})},V=_.Z.create({baseURL:{NODE_ENV:"production",BASE_URL:"./"}.VUE_APP_BASE_API,timeout:3e5,headers:{}});V.interceptors.request.use((e=>{const t=fe.getItem(T);return t&&(e.headers["Authorization"]=t,e.headers["Nonce-Str"]=_e()),e}),(e=>Promise.reject(e))),V.interceptors.response.use((e=>{if(200===e.status&&e.data){const t=e.data;return 101!==t.code||e.config.url.includes("/kfh5/user/token/refresh")||fe.getItem(x)||!fe.getItem(T)?0!==t.code?Promise.reject({...e,code:t.code,msg:t.msg}):Promise.resolve(t.data):(console.log("无refreshToken",e.config.url),D?new Promise((t=>{Q.push((s=>{e.config.headers.Authorization=s,t(V(e.config))}))})):(D=!0,(0,_.Z)({url:"/auth/refresh-token",method:"post",headers:{Authorization:fe.getItem(T),["Nonce-Str"]:_e()}}).then((t=>{const s=t.data;return 0==s.code?(e.config.headers.Authorization=s.data.accessToken,fe.setItem({name:T,value:s.data.token,expires:1e3*s.data.token_expire_unix}),fe.setItem({name:x,value:s.data.token_refresh_unix,expires:1e3*s.data.token_refresh_unix}),Q.forEach((e=>e(s.data.accessToken))),console.log("refresh response=>",Q,e.config.url),Q=[],V(e.config)):(console.log("刷新登录态code不为0"),Z(),Promise.reject({status:C,msg:"无效请求"}))})).catch((()=>(console.log("刷新登录态异常"),Z(),Promise.reject({status:C,msg:"无效请求"})))).finally((()=>{D=!1}))))}return Promise.reject({...e,msg:`错误：status：${e.status} - data：${e.data}`})}),(e=>{const{response:t}=e;if(t){const e=O(t.status,t.data.message);return console.log("结果=>","666"),Promise.reject({...t,msg:`${t.status}：${e}`})}return console.log("网络异常 请稍后重试"),Promise.reject({status:b,msg:"网络异常 请稍后重试"})}));var F=V;function z(e){return F({url:"/kfh5/user/login",method:"post",data:e})}function K(e){return F({url:"/kfh5/user/profile",method:"post",data:e})}function q(e){return F({url:"/kfh5/message/session/init",method:"post",data:e})}function G(e){return F({url:"/kfh5/message/session/quit",method:"post",data:e})}function j(e){return F({url:"/kfh5/message/session/heartbeat",method:"post",data:e})}function W(e){return F({url:"/kfh5/message/send",method:"post",data:e})}function J(e){return F({url:"/kfh5/message/pull",method:"post",data:e})}function X(e){return F({url:"/kfh5/message/leave",method:"post",data:e})}function $(e){return F({url:"/kfh5/message/msqueue/query",method:"post",data:e})}function ee(e){return F({url:"/kfh5/message/msqueue/hand-up",method:"post",data:e})}function te(e){return F({url:"/kfh5/message/msqueue/evaluate",method:"post",data:e})}function se(e){return F({url:"/kfh5/message/msqueue/join",method:"post",data:e})}function ie(e){return F({url:"/kfh5/message/banner/one",method:"post",data:e})}function ae(e){return F({url:"/kfh5/message/issue/hot/list",method:"post",data:e})}function ne(e){return F({url:"/kfh5/message/issue/relate/list",method:"post",data:e})}function oe(e){return F({url:"/kfh5/message/order/riding/list",method:"post",data:e})}function re(e){return F({url:"/kfh5/message/filemanager/upload/apply",method:"post",data:e})}function ce(e){return F({url:"/kfh5/message/filemanager/upload/success",method:"post",data:e})}const le=function(e){return/^(?:(?:\+|00)86)?1[3-9]\d{9}$/.test(e)};function ue(e){const t=new w.Z;return t.setPublicKey("-----BEGIN PUBLIC KEY-----MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDE/VcJpYMrSucLPPXvjs9bnAtDnywSA3v2nuGRNlEs/PDPe1H8IKvGy8vgdIrr3Al5fKGccGdFzJznO3ieX7Omoc3qYIlZ2tbW7PQQWgFdiTaBFxUVOzct127S7mDvGpxou2OeDA2ldCVaG3z8eR2lVWSiOk2ZaGH7IXT/99etWwIDAQAB-----END PUBLIC KEY-----"),t.encrypt(e)}const de=function(e){return A()(e)},he=function(e,t){return p().unix(e).format(t||"YYYY/MM/DD HH:mm:ss")};class me{constructor(){this.name="storage"}setItem(e){let t={name:"",value:"",expires:""},s={};if(Object.assign(s,t,e),s.expires)localStorage.setItem(s.name,JSON.stringify(s));else{let e=Object.prototype.toString.call(s.value);"[object Object]"!=e&&"[object Array]"!=e||(s.value=JSON.stringify(s.value)),localStorage.setItem(s.name,s.value)}}getItem(e){let t=localStorage.getItem(e);if(!t)return!1;try{t=JSON.parse(t)}catch(s){}if(t.expires){let s=(new Date).getTime();return s>t.expires?(localStorage.removeItem(e),!1):t.value}return t}removeItem(e){localStorage.removeItem(e)}clear(){localStorage.clear()}}const fe=new me;function ge(e){return/^(?:(?:\+|00)86)?1\d{10}$/.test(e)}const pe=function(e){return new Promise((t=>setTimeout((()=>{t()}),e)))},_e=function(){return(0,f.Z)().split("-")[0]+(new Date).getTime()+ve(10)},ve=function(e){const t=Math.floor((Math.random()+Math.floor(9*Math.random()+1))*Math.pow(10,e-1));return t},Ae=async(e,t)=>{let s;try{s=await re(e,t)}catch(i){throw new Error(i.msg)}return s},Ie=async(e,t,s)=>(0,_.Z)({url:e,data:t,method:"put",headers:s}),we=function({session_id:e,fileData:t}){return new Promise(((s,i)=>{let a=new FileReader;a.readAsBinaryString(t),a.addEventListener("loadend",(async()=>{const n=a.result;let o=I.md.md5.create().update(n).digest(),r=window.btoa(o.data);const c={"Content-MD5":r},l=new FormData;let u,d;l.append("file",t);try{u=await Ae({session_id:e,file_type:U.image,filename:t.name,md5:c["Content-MD5"],contentType:t.type,size:t.size}),u.hit||await Ie(u.upload_url,t,{"Content-MD5":c["Content-MD5"],"Content-Type":t.type}),d=await ye({session_id:e,file_id:u.file_id})}catch(h){return void i({message:h.message||"上传失败，请稍后重试"})}s({file_id:u.file_id,...d})}))}))},ye=async(e,t)=>{if(!e.session_id||!e.file_id)throw new Error("参数错误");let s;try{s=await ce(e,t)}catch(i){throw new Error(i.msg)}return s},ke=e=>{const t={};var s=/\?/g;if(s.test(e)){const s=e.substr(e.indexOf("?")+1),i=s.split("&");for(let e=0;e<i.length;e++){const s=i[e].split("=");t[s[0]]=s[1]}}return t},Ce=e=>new Blob([e],{type:e.type}),be=({blob:e,filename:t,type:s})=>new File([e],t,{type:s}),Te=e=>new Promise(((t,s)=>{const i=new FileReader;i.onload=e=>{t(e.target.result)},i.onerror=()=>{s()},i.readAsDataURL(e)}));var xe={name:"Login",components:{},data(){return{loginForm:{account:"",code:""},loginRules:{account:{tips:["","请输入手机号码","手机号码格式错误"],showIndex:0},code:{tips:["","请输入验证码","验证码错误"],showIndex:0}},loginLoading:!1,codeInfo:{loading:!1,tips:"获取验证码",time:6,disabled:!1}}},mounted(){},methods:{handleInput(e,t){t.target.value?"account"!=e||ge(t.target.value)?this.loginRules[e].showIndex=0:this.loginRules[e].showIndex=2:this.loginRules[e].showIndex=1},async handleSendCodeValidate(){this.loginForm.account?this.loginRules.account.showIndex||this.handleSendCode():this.loginRules.account.showIndex=1},async handleSendCode(){if(this.codeInfo.disabled)return;this.codeInfo.loading=!0,this.codeInfo.tips="发送中",this.codeInfo.loading=!1,this.codeInfo.disabled=!0,this.codeInfo.tips=`${this.codeInfo.time}s`,this.codeInfo.time--;let e=setInterval((()=>{if(this.codeInfo.time<1)return this.codeInfo.disabled=!1,this.codeInfo.loading=!1,this.codeInfo.time=6,this.codeInfo.tips="重新获取",clearInterval(e),void(e=null);this.codeInfo.tips=`${this.codeInfo.time}s`,this.codeInfo.time--}),1e3)},async handleLogin(){this.loginForm.account?this.loginForm.code?this.loginRules.account.showIndex||this.loginRules.code.showIndex||(this.$loading.show(),this.$loading.hide(),console.log("请求登录成功")):this.loginRules.code.showIndex=1:this.loginRules.account.showIndex=1},async initUserInfo(){}}},Ee=xe,Le=(0,c.Z)(Ee,h,m,!1,null,"6307cb86",null),Me=Le.exports,Se=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"home",style:e.pageLoading?" opacity: 0;pointer-events: none;":"opacity: 1;pointer-events: all;"},[e.bannerInfo.image_url?t("div",{staticClass:"banner"},[t("van-swipe",{attrs:{autoplay:3e3,"show-indicators":!1,"indicator-color":"white"}},[t("van-swipe-item",[t("img",{attrs:{src:e.bannerInfo.image_url,alt:""}})])],1)],1):e._e(),t("div",{staticClass:"chat"},[t("div",{ref:"common_chat_main",staticClass:"chat-container",on:{touchstart:e.handleTouchPage,scroll:e.handleMessageScorll}},[t("van-pull-refresh",{attrs:{"animation-duration":"0",disabled:e.chatFinished,"loosing-text":"下拉加载更多历史消息","pulling-text":"下拉加载更多历史消息"},on:{refresh:e.handleLoadHistoryList},model:{value:e.chatRefreshing,callback:function(t){e.chatRefreshing=t},expression:"chatRefreshing"}},[t("van-list",{attrs:{finished:!0,"finished-text":"",direction:"up","immediate-check":!1,offset:0},on:{load:e.onLoad},model:{value:e.chatLoading,callback:function(t){e.chatLoading=t},expression:"chatLoading"}},e._l(e.chatList,(function(s,i){return t("div",{key:i,staticClass:"chat-messages-item",attrs:{id:s.id}},[s.role==e.CHAT_ROLE_TYPE_ENUM.marginTip?t("div",{staticClass:"chat-messages-item-margin_tips"},[e._v(" "+e._s(s.content)+" ")]):e._e(),s.role==e.CHAT_ROLE_TYPE_ENUM.hotIssues?t("div",{staticClass:"chat-messages-hot_issues"},[t("div",{staticClass:"chat-messages-hot_issues-header"},[t("span",{style:`background-image: url('${e.hotIssueInfo.icon_url}');`}),t("p",[e._v("热门问题")])]),t("ul",e._l(e.hotIssueInfo.issue_list,(function(s,i){return t("li",{key:s.selfId,on:{click:function(t){return e.handleClickIssues(s)}}},[e._v(" "+e._s(i+1)+"."),t("span",[e._v(e._s(s.content))])])})),0)]):e._e(),s.role==e.CHAT_ROLE_TYPE_ENUM.roundTip?t("div",{staticClass:"chat-messages-item-roundtip"},[t("span",[e._v(e._s(s.content))])]):e._e(),s.role==e.CHAT_ROLE_TYPE_ENUM.defaultTip?t("div",{staticClass:"chat-messages-item-tips"},[e._v(" "+e._s(s.content)+" ")]):e._e(),s.role==e.CHAT_ROLE_TYPE_ENUM.switchKfBtn?t("div",{staticClass:"chat-messages-item-switch_btn"},[t("van-icon",{attrs:{name:"warning"}}),e._v(" 问题未解决，"),t("span",{on:{click:e.handleSwitchKf}},[e._v("我要转人工客服")])],1):e._e(),s.role==e.CHAT_ROLE_TYPE_ENUM.hangUpCard?t("div",{staticClass:"chat-messages-item-handup"},[t("p",{staticClass:"chat-messages-item-handup-tip"},[e._v(" - 已为您接通人工客服 - ")]),t("div",{staticClass:"chat-messages-item-handup-box"},[t("p",{staticClass:"chat-messages-item-handup-title"},[e._v(" 人工客服"+e._s(s.kfname)+" ")]),t("p",{staticClass:"chat-messages-item-handup-type"},[e._v("在线客服")]),t("p",{staticClass:"chat-messages-item-handup-btn",on:{click:function(t){return e.handleChatClose(!1,s.session_id)}}},[e._v(" 挂断聊天 ")])])]):e._e(),s.role==e.CHAT_ROLE_TYPE_ENUM.evaluate?t("div",{staticClass:"chat-messages-item-evaluate"},[t("p",{staticClass:"chat-messages-item-evaluate-title"},[e._v(" 请您对本次服务做出评价 ")]),t("div",{staticClass:"chat-messages-item-evaluate-box"},[t("span",[e._v("服务满意度")]),t("van-rate",{attrs:{size:18,color:"#FADB14","void-icon":"star","void-color":"#F5F5F5",readonly:0!==s.content},on:{change:function(t){return e.handleChangeRate(t,s)}},model:{value:s.content,callback:function(t){e.$set(s,"content",t)},expression:"item.content"}})],1)]):e._e(),s.role==e.CHAT_ROLE_TYPE_ENUM.leaveMsg?t("div",{staticClass:"chat-messages-item-leave"},[t("p",{staticClass:"chat-messages-item-leave-tip"},[e._v(" 很抱歉，暂时无法为您提供服务，请留言我们会尽快与您取得联系！ ")]),t("div",{staticClass:"chat-messages-item-leave-box"},[t("p",{staticClass:"chat-messages-item-leave-box-title"},[e._v("请留言")]),t("div",{staticClass:"chat-messages-item-leave-box-form form1"},[t("span",[e._v("联系方式")]),t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.leaveInfo.contact_info,expression:"leaveInfo.contact_info",modifiers:{trim:!0}}],attrs:{type:"number",placeholder:"请预留您的联系方式"},domProps:{value:e.leaveInfo.contact_info},on:{input:function(t){t.target.composing||e.$set(e.leaveInfo,"contact_info",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),t("div",{staticClass:"chat-messages-item-leave-box-form form2"},[t("span",[e._v("问题描述")]),t("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:e.leaveInfo.issue_desc,expression:"leaveInfo.issue_desc",modifiers:{trim:!0}}],attrs:{placeholder:"请描述您的问题",maxlength:"200"},domProps:{value:e.leaveInfo.issue_desc},on:{input:function(t){t.target.composing||e.$set(e.leaveInfo,"issue_desc",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),t("button",{staticClass:"chat-messages-item-leave-box-btn",on:{click:e.handldeSubmitLeave}},[e._v(" 提交 ")])])]):e._e(),s.role==e.CHAT_ROLE_TYPE_ENUM.leaveMsgBtn?t("div",{staticClass:"chat-messages-item-leavebtn"},[t("p",{staticClass:"chat-messages-item-leavebtn-tip"},[e._v(" "+e._s(s.content)+" ")]),t("p",{staticClass:"chat-messages-item-leavebtn-btn",on:{click:e.handleLeaveMessageShow}},[e._v(" 【我要留言】 ")])]):e._e(),s.role==e.CHAT_ROLE_TYPE_ENUM.relatedIssues?t("div",{staticClass:"chat-messages-item-related_issues"},[t("p",{staticClass:"chat-messages-item-related_issues-title"},[e._v(" 以下问题是你关心的吗？ ")]),t("ul",{staticClass:"chat-messages-item-related_issues-list"},e._l(s.content,(function(s,i){return t("li",{key:i,on:{click:function(t){return e.handleClickIssues(s)}}},[e._v(" "+e._s(s.content)+" ")])})),0)]):s.role==e.CHAT_ROLE_TYPE_ENUM.user?t("div",{staticClass:"chat-messages-item-me"},[t("div",{staticClass:"chat-messages-item-me-user"},[s.contentType==e.CHAT_CONTENT_TYPE_ENUM.text?t("div",{staticClass:"chat-messages-item-me-user-content"},[t("div",{staticClass:"chat-messages-item-me-user-content-box"},[s.sendLoading?t("van-icon",{staticClass:"resend-btn loading-btn",attrs:{name:"replay"}}):s.sendSuss?e._e():t("van-icon",{staticClass:"resend-btn",attrs:{name:"warning"},on:{click:function(t){return e.handleReSendMeaasge(s)}}}),t("p",{staticClass:"chat-messages-item-me-user-content-text",domProps:{innerHTML:e._s(s.content.text)}})],1)]):s.contentType==e.CHAT_CONTENT_TYPE_ENUM.image?t("div",{staticClass:"chat-messages-item-me-user-content"},[t("div",{staticClass:"chat-messages-item-me-user-content-box"},[t("span",{staticClass:"resend-btn loading-btn"}),t("img",{staticClass:"img",attrs:{src:s.content.image},on:{click:function(t){return e.handlePicShow(s.content.image)}}})])]):s.contentType==e.CHAT_CONTENT_TYPE_ENUM.ride?t("div",{staticClass:"chat-messages-item-me-user-content ride"},[t("div",{staticClass:"chat-messages-item-me-user-content-box"},[s.sendLoading?t("van-icon",{staticClass:"resend-btn loading-btn",attrs:{name:"replay"}}):s.sendSuss?e._e():t("van-icon",{staticClass:"resend-btn",attrs:{name:"warning"},on:{click:function(t){return e.handleReSendMeaasge(s)}}}),t("div",{staticClass:"chat-messages-item-me-user-ride"},[t("p",{staticClass:"chat-messages-item-me-user-ride-title"},[e._v(" 乘车时间"),t("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(e.timestamp2String(s.content.ride_record.pay_unix)))])]),t("div",{staticClass:"chat-messages-item-me-user-ride-info"},[t("p",{staticClass:"chat-messages-item-me-user-ride-info-title"},[e._v(" "+e._s(s.content.ride_record.start_station)+" — "+e._s(s.content.ride_record.terminal)+" ")]),t("p",{staticClass:"chat-messages-item-me-user-ride-info-count"},[e._v(" -¥"+e._s(s.content.ride_record.amount)+" ")])])])],1)]):e._e(),t("div",{staticClass:"chat-messages-item-me-user-avatar"},[t("img",{attrs:{src:e.userProfile.avatar_url,alt:""}})])])]):s.role==e.CHAT_ROLE_TYPE_ENUM.staff||s.role==e.CHAT_ROLE_TYPE_ENUM.robot?t("div",{staticClass:"chat-messages-item-you"},[t("div",{staticClass:"chat-messages-item-you-user"},[t("div",{staticClass:"chat-messages-item-you-user-avatar"},[t("img",{attrs:{src:s.kfAvatar,alt:""}})]),t("div",{staticClass:"chat-messages-item-you-user-info"},[t("p",{staticClass:"chat-messages-item-you-user-info-name"},[e._v(" "+e._s(s.kfname)+" ")]),s.contentType==e.CHAT_CONTENT_TYPE_ENUM.text?t("div",{staticClass:"chat-messages-item-you-user-content"},[t("p",{staticClass:"chat-messages-item-you-user-content-text",domProps:{innerHTML:e._s(s.content.text)}})]):s.contentType==e.CHAT_CONTENT_TYPE_ENUM.image?t("div",{staticClass:"chat-messages-item-you-user-content"},[t("img",{staticClass:"img",attrs:{src:s.content.image},on:{click:function(t){return e.handlePicShow(s.content.image)}}})]):s.contentType==e.CHAT_CONTENT_TYPE_ENUM.auto?t("div",{staticClass:"chat-messages-item-you-user-content"},[t("div",{staticClass:"chat-messages-item-you-user-content-auto"},[t("input",{staticStyle:{display:"none"},attrs:{type:"checkbox",id:"exp"}}),t("div",{staticClass:"chat-messages-item-you-user-content-auto-txt",attrs:{id:s.moreId}},[e._v(" "+e._s(s.content.text)+" ")]),s.showMoreBtn?t("label",{staticClass:"chat-messages-item-you-user-content-auto-btn",attrs:{for:"exp"},on:{click:function(t){return e.handleIssuesMoreShow(s)}}},[e._v(" 查看更多 ")]):e._e()])]):e._e()])])]):e._e()])})),0)],1)],1)]),t("div",{staticClass:"chat-footer"},[t("div",{staticClass:"chat-footer-tags"},[e.waitInfo.state==e.WAIT_STATUS_ENUM.success?t("div",{on:{click:function(t){return e.handleChatClose(!1,e.waitInfo.session_id)}}},[t("span"),e._v(" 挂断聊天 ")]):e._e(),t("div",{on:{click:e.handleRideRecordShow}},[e._v("乘车记录")])]),t("div",{staticClass:"chat-footer-wrapper"},[t("div",{staticClass:"chat-footer-wrapper-box"},[t("div",{staticClass:"chat-footer-input",attrs:{maxlength:"500",contenteditable:"true"},on:{blur:e.handleInputBlur,focus:e.handleInputFocus,input:e.handleInput}}),e.chatInputFocus||e.chatInputContent?e._e():t("p",[e._v(" "+e._s(e.chatInfo.chat_window.prompt)+" ")])]),t("div",{staticClass:"chat-footer-send"},[t("div",{staticClass:"chat-footer-send-pic"},[t("input",{attrs:{type:"file",accept:"image/png, image/jpeg, image/gif, image/jpg",multiple:""},on:{change:e.handleChangeFile}}),t("img",{attrs:{src:s(7945),alt:""}})]),t("span",{staticClass:"chat-footer-send-txt",on:{click:function(t){return t.preventDefault(),e.handleSendText(t,null)}}})])])]),t("van-overlay",{attrs:{show:e.picVisible},on:{click:e.handlePicHide}},[e.picVisible?t("div",{staticClass:"view-pic",on:{click:e.handlePicHide}},[t("img",{attrs:{src:e.picSrc,alt:""}})]):e._e()]),t("van-overlay",{attrs:{show:e.leaveMessageVisible},on:{click:e.handleLeaveMessageHide}},[t("div",{staticClass:"leave",on:{click:function(e){e.stopPropagation()}}},[t("div",{staticClass:"leave-box"},[t("p",{staticClass:"leave-box-title"},[e._v("请留言")]),t("div",{staticClass:"leave-box-form form1"},[t("span",[e._v("联系方式")]),t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.leaveInfo.contact_info,expression:"leaveInfo.contact_info",modifiers:{trim:!0}}],attrs:{type:"number",placeholder:"请预留您的联系方式"},domProps:{value:e.leaveInfo.contact_info},on:{input:function(t){t.target.composing||e.$set(e.leaveInfo,"contact_info",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),t("div",{staticClass:"leave-box-form form2"},[t("span",[e._v("问题描述")]),t("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:e.leaveInfo.issue_desc,expression:"leaveInfo.issue_desc",modifiers:{trim:!0}}],attrs:{placeholder:"请描述您的问题",maxlength:"200"},domProps:{value:e.leaveInfo.issue_desc},on:{input:function(t){t.target.composing||e.$set(e.leaveInfo,"issue_desc",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),t("button",{staticClass:"leave-box-btn",on:{click:function(t){return t.stopPropagation(),e.handldeSubmitLeave.apply(null,arguments)}}},[e._v(" 提交 ")])])])]),t("van-overlay",{attrs:{show:e.leaveMessageSuccVisible},on:{click:e.handleLeaveMessageSuccHide}},[t("div",{staticClass:"leave-succ"},[t("div",{staticClass:"leave-succ-box"},[t("img",{attrs:{src:s(7726),alt:""}}),t("p",{staticClass:"leave-succ-box-title"},[e._v("提交留言成功")]),t("p",{staticClass:"leave-succ-box-tip"},[e._v(" 我们会尽快与您取得联系，请耐心等候！ ")])])])]),t("van-popup",{attrs:{closeable:"",position:"bottom"},model:{value:e.rideRecordVisible,callback:function(t){e.rideRecordVisible=t},expression:"rideRecordVisible"}},[t("div",{staticClass:"ride-record"},[t("p",{staticClass:"ride-record-title"},[e._v("乘车记录")]),t("van-tabs",{attrs:{swipeable:"",animated:"","swipe-threshold":"3"},on:{change:e.handleRideSlideChange},model:{value:e.rideTabList.tabIndex,callback:function(t){e.$set(e.rideTabList,"tabIndex",t)},expression:"rideTabList.tabIndex"}},e._l(e.rideTabList.tabList,(function(i,a){return t("van-tab",{key:a,staticClass:"ride-record-box",attrs:{title:i.label}},[t("van-pull-refresh",{on:{refresh:function(t){return e.rideOnRefresh(i)}},model:{value:i.refreshing,callback:function(t){e.$set(i,"refreshing",t)},expression:"tabItem.refreshing"}},[i.list.length?t("van-list",{staticClass:"ride-record-list",attrs:{finished:i.finished,"finished-text":"没有更多了~","immediate-check":!1,offset:50},on:{load:function(t){return e.initRideList({page:i.page,size:i.size,pay_method:i.value})}},model:{value:i.loading,callback:function(t){e.$set(i,"loading",t)},expression:"tabItem.loading"}},e._l(i.list,(function(s,i){return t("div",{key:i,staticClass:"ride-record-item"},[t("div",{staticClass:"ride-record-info"},[t("p",{staticClass:"ride-record-info-title"},[e._v(" "+e._s(s.start_station)+" — "+e._s(s.terminal)+" ")]),t("p",{staticClass:"ride-record-info-date"},[e._v(" "+e._s(e.timestamp2String(s.pay_unix))+" ")])]),t("div",{staticClass:"ride-record-opt"},[t("p",{staticClass:"ride-record-opt-count"},[e._v(" -¥"+e._s(s.amount)+" ")]),t("button",{staticClass:"ride-record-opt-send",on:{click:function(t){return e.handleSendRide(s)}}},[e._v(" 发送 ")])])])})),0):t("div",{staticClass:"ride-record-empty"},[t("img",{attrs:{src:s(8773),alt:""}}),t("p",[e._v("暂无乘车记录")])])],1)],1)})),1)],1)])],1)])},Re=[],Pe=(s(541),s(6229),s(7330),s(2062),{name:"HomeChat",data(){return{CHAT_ROLE_TYPE_ENUM:B,RIDE_PAY_TYPE_LIST:S,CHAT_CONTENT_TYPE_ENUM:H,WAIT_STATUS_ENUM:Y,timestamp2String:he,pageLoading:!0,chatInputContent:"",chatInputFocus:!1,firstMsgId:"",chatList:[],channelId:"",chatLoading:!1,chatFinished:!1,chatRefreshing:!1,picVisible:!1,picSrc:"",leaveMessageVisible:!1,leaveMessageSuccVisible:!1,leaveInfo:{contact_info:"",issue_desc:""},rideRecordVisible:!1,rideTabList:{tabIndex:0,tabList:[{loading:!1,finished:!1,refreshing:!1,label:R[M.zfb].label,value:M.zfb,list:[],page:1,size:k},{loading:!1,finished:!1,refreshing:!1,label:R[M.wx].label,value:M.wx,list:[],page:1,size:k},{loading:!1,finished:!1,refreshing:!1,label:R[M.union].label,value:M.union,list:[],page:1,size:k},{loading:!1,finished:!1,refreshing:!1,label:R[M.digital].label,value:M.digital,list:[],page:1,size:k},{loading:!1,finished:!1,refreshing:!1,label:R[M.wxQrocode].label,value:M.wxQrocode,list:[],page:1,size:k}]},userProfile:{user_id:"",nickname:"",avatar_url:""},chatInfo:{session_id:"",chat_window:{name:E,notes:"",welcome_message:"",prompt:L,robot:{nickname:"",avatar_url:""}}},bannerInfo:{image_url:""},hotIssueInfo:{icon_url:"",issue_list:[]},relateIssueLoading:!1,waitInfo:{},waitList:[],kfReply:{timer:null,time:180},messageQuitTimer:null,messageQuitTime:0,messageQuitTipEnd:!1}},created(){},watch:{},computed:{disabledLeaveSubmit(){return!le(this.leaveInfo.contact_info)||!this.leaveInfo.issue_desc}},beforeDestroy(){},async mounted(){if(!fe.getItem(T)){const e="111";let t={auth_code:window.btoa(encodeURIComponent(ue(e)))};try{await this.initLogin(t)}catch(i){return void this.$router.replace("/error")}}try{await this.init()}catch(i){return void(i.message==b?this.$toast({message:"网络异常 请稍后重试"}):i.message!=C&&this.$toast({message:i.message}))}this.sessionHeartbeat(),setInterval((()=>{this.sessionHeartbeat()}),3e4),window.addEventListener("onbeforeunload",(()=>{this.messageQuit()})),this.goEnd((()=>{this.pageLoading=!1})),this.setFirstMsgId(),this.initMoreBtn();const e=s(6084),t=e();t.listenTo(document.getElementsByClassName("chat-footer"),(function(e){var t=e.offsetHeight;document.getElementsByClassName("home")[0].style["padding-bottom"]=t+0+"px"}))},methods:{async init(){const e=ke("https://www.baidu.com/?uid=admin&rid=1&fid=2&channel=小明");if(!e.channel)throw new Error("参数错误");this.channelId=e.channel;try{await this.initChatInfo(),await this.initUserProfile(),await this.initBanner();for await(const t of this.rideTabList.tabList)await this.initRideList({page:t.page,size:t.size,pay_method:t.value});if([Y.fail].includes(this.chatInfo.state))return;let e=await this.getMessage({mode:P.prev,start_message_id:""});e=this.filterMessage(e),console.log("=======历史记录tmessageList",e),this.chatList.unshift(...e),this.addChatTime(this.chatList),await this.initHotIssueList(),this.goEnd()}catch(t){throw new Error(t.message)}},async initLogin(){let e;console.log("initLogin invoke");try{e=await z()}catch(t){throw t.status!=C&&t.status!=b?new Error(t.msg):new Error(t.status)}fe.setItem({name:T,value:e.token,expires:1e3*e.token_expire_unix}),fe.setItem({name:x,value:e.token_refresh_unix,expires:1e3*e.token_refresh_unix})},async initUserProfile(){let e;console.log("initUserProfile invoke");try{e=await K()}catch(t){throw t.status!=C&&t.status!=b?new Error(t.msg):new Error(t.status)}this.userProfile=e},async initChatInfo(){let e;console.log("initChatInfo invoke");try{e=await this.initMessageInfo()}catch(t){if(t.message!=C)throw new Error(t.message);return}switch(this.chatInfo.state){case Y.init:this.chatList.push({id:_e(),createUnix:parseInt((new Date).getTime()/1e3),sendSuss:!0,sendLoading:!1,showMoreBtn:!1,moreId:_e(),customId:_e(),role:B.robot,contentType:H.auto,kfname:this.chatInfo.chat_window.robot.nickname,kfAvatar:this.chatInfo.chat_window.robot.avatar_url,content:{text:this.chatInfo.chat_window.welcome_message}});break;case Y.inqueue:let s=!1;try{const e=await this.getQueueStatus();if(console.log("==========getQueueStatus",e),e.state==Y.success||0==e.in_queue_count)this.chatList.push({role:B.hangUpCard,content:"",customId:_e(),kfId:e.staff_info.user_id,kfname:e.staff_info.nickname,session_id:e.session_id}),this.chatList.push({role:B.staff,contentType:H.text,content:{text:`您好，客服${e.staff_info.nickname}为您服务，请问您有什么需要咨询的问题吗？`},customId:_e(),sendSuss:!0,sendLoading:!1,showMoreBtn:!1,moreId:_e(),kfId:e.staff_info.user_id,kfname:e.staff_info.nickname,kfAvatar:e.staff_info.avatar_url}),this.chatInfo.session_id=e.session_id,s=!0,this.watchChatActive();else if(e.state==Y.inqueue){if(this.waitInfo.in_queue_count===e.in_queue_count)return;this.chatList.push({role:B.roundTip,customId:_e(),content:`在当前排队${e.in_queue_count}人，请稍后…`})}else e.state==Y.fail&&(this.chatList.push({role:B.leaveMsgBtn,customId:_e(),content:"很抱歉，暂时无法为您提供服务，请留言我们会尽快与您取得联系！"}),s=!0);this.goEnd(null,100),this.waitInfo=e}catch(t){return void(t.message==b?(this.chatList.push({role:B.defaultTip,customId:_e(),content:"- 网络异常 请稍后重试 -"}),this.goEnd(null,100)):t.message!=C&&this.$toast({message:t.message}))}if(s)return;this.waitSwtichStaff(!0);break;case Y.success:this.chatList.push({role:B.hangUpCard,content:"",customId:_e(),kfId:this.chatInfo.staff_info.user_id,kfname:this.chatInfo.staff_info.nickname,session_id:e.session_id}),this.chatList.push({role:B.staff,contentType:H.text,content:{text:`您好，客服${this.chatInfo.staff_info.nickname}为您服务，请问您有什么需要咨询的问题吗？`},customId:_e(),sendSuss:!0,sendLoading:!1,showMoreBtn:!1,moreId:_e(),kfId:this.chatInfo.staff_info.user_id,kfname:this.chatInfo.staff_info.nickname,kfAvatar:this.chatInfo.staff_info.avatar_url}),this.waitInfo.state=Y.success,this.waitInfo.session_id=e.session_id,this.chatInfo.session_id=e.session_id,this.watchChatActive();break;case Y.transfer:this.chatList.push({role:B.roundTip,customId:_e(),content:"客服转接中，请稍后…"}),this.goEnd(null,100),this.switchStaff();break;case Y.fail:this.chatList.push({sendSuss:!0,sendLoading:!1,customId:_e(),role:B.leaveMsg});break;case Y.evaluate:this.chatList.push({role:B.defaultTip,customId:_e(),content:"- 本次服务已完成，请为本次服务做出评价! -"}),this.chatList.push({role:B.evaluate,customId:_e(),content:0,session_id:this.chatInfo.session_id});break;default:break}},async initMessageInfo(){const e={channel:this.channelId};let t;try{t=await q(e)}catch(s){throw s.status!=C&&s.status!=b?new Error(s.msg):new Error(s.status)}return t.chat_window.name=t.chat_window.name||E,t.chat_window.prompt=t.chat_window.prompt||L,this.chatInfo=t,document.title=this.chatInfo.chat_window.name,t},async initBanner(){console.log("initBanner invoke");const e={session_id:this.chatInfo.session_id};let t;try{t=await ie(e)}catch(s){throw s.status!=C&&s.status!=b?new Error(s.msg):new Error(s.status)}this.bannerInfo=t,this.bannerInfo.image_url||(document.getElementsByClassName("home")[0].style["padding-top"]=0)},async initHotIssueList(){let e;console.log("initHotIssueList invoke");try{e=await ae()}catch(t){throw t.status!=C&&t.status!=b?new Error(t.msg):new Error(t.status)}e.issue_list=e.issue_list.map((e=>({...e,selfId:e.id}))),console.log("=======getHotIssueList",e),this.chatList.unshift({role:B.hotIssues,content:e}),this.hotIssueInfo=e},async initRideList(e){console.log("initRideList invoke",e);const t={session_id:this.chatInfo.session_id,page:e.page,size:e.size,pay_method:e.pay_method};let s;try{s=await oe(t)}catch(a){throw a.status!=C&&a.status!=b?new Error(a.msg):new Error(a.status)}s.riding_list=s.riding_list.map((e=>({...e,selfId:e.id})));const i=this.rideTabList.tabList.find((t=>t.value==e.pay_method));if(!s.riding_list.length)return i.finished=!0,void(i.loading=!1);e.refresh?i.list=s.riding_list||[]:i.list.push(...s.riding_list||[]),i.loading=!1,i.page++},initMoreBtn(){this.$nextTick((()=>{this.chatList=this.chatList.map((e=>{if(e.contentType==H.auto){const t=document.getElementById(e.moreId);t.scrollHeight>t.clientHeight+10?(console.log("机器人回复：查看更多=>",e),e.showMoreBtn=!0):e.showMoreBtn=!1}return e}))}))},watchChatActive(){clearInterval(this.messageQuitTimer),this.messageQuitTimer=null,this.messageQuitTime=0,this.messageQuitTipEnd=!1,this.messageQuitTimer=setInterval((()=>{this.messageQuitTime+=1,!this.messageQuitTipEnd&&this.messageQuitTime>=180&&(console.log("180秒不发消息，超时提醒"),this.chatList.push({role:B.defaultTip,customId:_e(),content:"会话回复已超时，请及时回复哦，我们将全力协助您解决"}),this.goEnd(null,100),this.messageQuitTipEnd=!0),this.messageQuitTime>=220&&(console.log("220秒不发消息，退出会话"),clearInterval(this.messageQuitTimer),this.messageQuitTimer=null,this.chatList.push({role:B.defaultTip,customId:_e(),content:"会话回复超时，会话挂断，本次服务已完成，请为本次服务做出评价！"}),this.goEnd(null,100),this.handleChatClose(!0,this.waitInfo.session_id))}),1e3)},async waitSwtichStaff(e=!1){let t=setInterval((async()=>{try{const s=await this.getQueueStatus();if(console.log("==========getQueueStatus",s),s.state==Y.success||0==s.in_queue_count)clearInterval(t),t=null,!0===e?this.chatList.push({role:B.defaultTip,customId:_e(),content:"- 客服接入成功，很高兴为您服务！-"}):this.chatList.push({role:B.hangUpCard,content:"",customId:_e(),kfId:s.staff_info.user_id,kfname:s.staff_info.nickname,session_id:s.session_id}),this.chatList.push({role:B.staff,contentType:H.text,content:{text:`您好，客服${s.staff_info.nickname}为您服务，请问您有什么需要咨询的问题吗？`},customId:_e(),sendSuss:!0,sendLoading:!1,showMoreBtn:!1,moreId:_e(),kfId:s.staff_info.user_id,kfname:s.staff_info.nickname,kfAvatar:s.staff_info.avatar_url}),this.watchChatActive(),this.chatInfo.session_id=s.session_id;else if(s.state==Y.inqueue){if(this.waitInfo.in_queue_count===s.in_queue_count)return;this.chatList.push({role:B.roundTip,customId:_e(),content:`在当前排队${s.in_queue_count}人，请稍后…`})}else s.state==Y.fail&&(clearInterval(t),t=null,this.chatList.push({role:B.leaveMsgBtn,customId:_e(),content:"很抱歉，暂时无法为您提供服务，请留言我们会尽快与您取得联系！"}));this.goEnd(null,100),this.waitInfo=s}catch(s){return s.message==b?(this.chatList.push({role:B.defaultTip,customId:_e(),content:"- 网络异常 请稍后重试 -"}),this.goEnd(null,100)):s.message!=C&&this.$toast({message:s.message}),clearInterval(t),void(t=null)}}),2e3)},filterMessage(e){return e.map((e=>{const t={selfId:e.selfId,message_id:e.message_id,role:"",contentType:e.message_type,content:e.content,createUnix:e.create_unix,sendSuss:!0,sendLoading:!1,showMoreBtn:!1,id:_e(),moreId:_e(),customId:_e()};return e.belong_to==N.user?t.role=B.user:e.belong_to==N.staff&&e.staff_info.user_id?(t.role=B.staff,t.kfId=e.staff_info.user_id,t.kfname=e.staff_info.nickname,t.kfAvatar=e.staff_info.avatar_url):(t.role=B.robot,t.contentType=H.auto,t.kfname=this.chatInfo.chat_window.robot.nickname,t.kfAvatar=this.chatInfo.chat_window.robot.avatar_url),t}))},async getRelateIssueList(e){const t={session_id:this.chatInfo.session_id,message:e};let s;try{s=await ne(t)}catch(i){return this.$toast({message:i.msg}),[]}finally{this.relateIssueLoading=!1}s.issue_list=s.issue_list||[],s.issue_list=s.issue_list.map((e=>({...e,selfId:e.id}))),console.log("==========getRelateIssueList",s),s.issue_list.length&&(this.chatList.push({customId:_e(),role:B.relatedIssues,content:s.issue_list}),this.goEnd())},async getMessageRegularTime(){if(clearInterval(this.kfReply.timer),this.kfReply.timer=null,this.kfReply.time=180,this.kfReply.timer=setInterval((async()=>{if(this.kfReply.time--,this.kfReply.time<=0)return console.log("======：客服回复超出时长超时，转接其他客服---\x3e留言大弹窗"),this.chatList.push({role:B.defaultTip,customId:_e(),content:"很抱歉，目前无法准确定位您的问题，我们正在为您转接其他客服"}),this.chatList.push({role:B.roundTip,customId:_e(),content:"客服转接中，我们正在为您转接其他客服，请稍后…"}),this.goEnd(null,100),clearInterval(this.kfReply.timer),this.kfReply.timer=null,void this.switchStaff()}),1e3),this.kfReply.time<=0)return;const e=de(this.chatList).reverse().find((e=>e.selfId));let t=await this.getMessage({mode:P.next,start_message_id:e?e.message_id:""});if(t=this.filterMessage(t),this.kfReply.time<=0)return;console.log("=======getMessageRegularTime",t);const s=[];t.forEach((e=>{const t=this.chatList.filter((e=>!e.selfId&&e.role==B.user)),i=t.find((t=>t.contentType==H.text&&e.contentType==H.text&&t.content.text==e.content.text)),a=t.find((t=>t.contentType==H.image&&e.contentType==H.image&&t.content.image==e.content.image)),n=t.find((t=>t.contentType==H.ride&&e.contentType==H.ride&&t.content.ride_record.id==e.content.ride_record.id));if(i||a||n){const t=this.chatList.findIndex((e=>e.customId==(i||a||n).customId));t>-1&&(this.chatList[t]={...i||a||n,...e})}else s.push(e)})),this.chatList.push(...s),this.addChatTime(this.chatList),this.initMoreBtn(),this.goEnd(),this.getMessageRegularTime()},async handleReSendMeaasge(e){if(console.log("=======handleReSendMeaasge",e),e.sendLoading=!0,e.contentType==H.text){const t={message:e.content,type:H.text};try{await this.createMessage(t)}catch(s){return void(e.sendSuss=!1)}finally{e.sendLoading=!1}if(e.sendSuss=!0,this.relateIssueLoading)return;this.relateIssueLoading=!0,await pe(1e3),this.getRelateIssueList(e.content)}if(e.contentType==H.image){let t,i=be({blob:e.file.blob,filename:e.file.filename,type:e.file.type}),a=await Te(i);console.log("==========",e.file,i,a);try{t=await we({session_id:this.chatInfo.session_id,fileData:i})}catch(s){return e.sendSuss=!1,void(e.sendLoading=!1)}const n={message:t.download_url,type:H.image};try{await this.createMessage(n)}catch(s){return void(e.sendSuss=!1)}finally{e.sendLoading=!1}e.sendSuss=!0}if(e.contentType==H.ride){const t={message:e.selfId,type:H.ride};try{await this.createMessage(t)}catch(s){return void(e.sendSuss=!1)}finally{e.sendLoading=!1}e.sendSuss=!0}const t=this.chatList.findIndex((t=>t.customId==e.customId));t>-1&&this.chatList.splice(t,1)},async switchStaff(){let e=!1;try{const t=await this.msqueueJoin();if(console.log("==========msqueueJoin",t),t.state==Y.success)this.chatList.push({role:B.defaultTip,customId:_e(),content:"- 客服接入成功，很高兴为您服务！-"}),this.chatList.push({role:B.staff,contentType:H.text,content:{text:`您好，客服${t.staff_info.nickname}为您服务，请问您有什么需要咨询的问题吗？`},customId:_e(),sendSuss:!0,sendLoading:!1,showMoreBtn:!1,moreId:_e(),kfId:t.staff_info.user_id,kfname:t.staff_info.nickname,kfAvatar:t.staff_info.avatar_url}),e=!0,this.chatInfo.session_id=t.session_id,this.watchChatActive();else if(t.state==Y.inqueue){if(this.waitInfo.in_queue_count===t.in_queue_count)return;this.chatList.push({role:B.defaultTip,customId:_e(),content:"转接客服失败，当前无空闲人员接待，已为您进入排队队列"}),this.chatList.push({role:B.roundTip,customId:_e(),content:`在当前排队${t.in_queue_count}人，请稍后…`})}else t.state==Y.fail&&(this.chatList.push({role:B.leaveMsgBtn,customId:_e(),content:"转接客服失败，暂时无法为您提供服务，请留言我们会尽快与您取得联系！"}),e=!0);if(this.goEnd(null,100),this.waitInfo=t,e)return;this.waitSwtichStaff(!0)}catch(t){return void(t.message==b?(this.chatList.push({role:B.defaultTip,customId:_e(),content:"- 网络异常 请稍后重试 -"}),this.goEnd(null,100)):t.message!=C&&this.$toast({message:t.message}))}},async getQueueStatus(){const e={session_id:this.chatInfo.session_id};let t;try{t=await $(e)}catch(s){throw s.status!=C&&s.status!=b?new Error(s.msg):new Error(s.status)}return t},handleClickIssues(e){this.handleSendText(null,e.content)},async handleChangeFile(e){console.log("选择图片=>",e,e.target.files);const t=e.target.files;if(!t.length)return;if(t.length>9)return void this.$toast("最多可选择9张");let s=!0;for(let a=0;a<t.length;a++){const e=t[a];if(!/\/(jpg|jpeg|png|gif)$/.test(e.type)){this.$toast("请上传图片格式"),s=!1;break}}if(s)for(let a=0;a<t.length;a++){const s=t[a];let n=URL.createObjectURL(s),o=await this.getImageSize(n);console.log("=====666",e,o);const r={role:B.user,contentType:H.image,content:{image:n},sendLoading:!0,sendSuss:!0,customId:_e(),file:{blob:Ce(s),url:n,filename:s.name,type:s.type}};let c;this.chatList.push(r),this.goEnd();try{c=await we({session_id:this.chatInfo.session_id,fileData:s})}catch(i){return r.sendSuss=!1,void(r.sendLoading=!1)}const l={message:c.download_url,type:H.image};try{await this.createMessage(l)}catch(i){return void(r.sendSuss=!1)}finally{r.sendLoading=!1}r.sendSuss=!0}},getImageSize(e){return new Promise((function(t,s){let i=new Image;i.onload=function(){t({width:i.width,height:i.height})},i.onerror=function(){s(new Error("error"))},i.src=e}))},async handleSendRide(e){console.log("发送乘车记录=>",e);const t={role:B.user,customId:_e(),id:_e(),contentType:H.ride,content:{ride_record:e},sendLoading:!0,sendSuss:!0};this.chatList.push(t),this.goEnd(),this.handleRideRecordHide();const s={message:e.selfId,type:H.ride};try{await this.createMessage(s)}catch(i){return void(t.sendSuss=!1)}finally{t.sendLoading=!1}t.sendSuss=!0},async handleChatClose(e=!1,t){if(console.log("挂断聊天",this.waitInfo.session_id,t),!this.waitInfo.session_id)return;if(this.waitInfo.session_id!=t)return;const s={session_id:t};console.log("挂断聊天",s);try{await ee(s)}catch(i){return void(i.status==b?(this.chatList.push({role:B.defaultTip,customId:_e(),content:"- 网络异常 请稍后重试 -"}),this.goEnd(null,100)):i.status!=C&&this.$toast({message:i.msg}))}clearInterval(this.messageQuitTimer),this.messageQuitTimer=null,!0!==e&&this.chatList.push({role:B.defaultTip,customId:_e(),content:"- 本次服务已完成，请为本次服务做出评价! -"}),this.chatList.push({role:B.evaluate,customId:_e(),content:0,session_id:this.waitInfo.session_id}),this.initMessageInfo(),this.waitList.push(this.waitInfo),this.waitInfo={},this.goEnd(null,100)},async handleChangeRate(e,t){console.log("评分=>",e,t);const s={session_id:t.session_id,star_count:e};try{await te(s)}catch(i){return i.status==b?(this.chatList.push({role:B.defaultTip,customId:_e(),content:"- 网络异常 请稍后重试 -"}),this.goEnd(null,100)):i.status!=C&&this.$toast({message:i.msg}),void(t.content=0)}this.chatList.push({role:B.defaultTip,customId:_e(),content:"- 感谢您的评价，我们会继续努力 -"}),this.goEnd(null,100)},async handldeSubmitLeave(){if(!this.leaveInfo.contact_info)return void this.$toast({message:"请输入联系方式"});if(!le(this.leaveInfo.contact_info))return void this.$toast({message:"手机号码格式不正确"});if(!this.leaveInfo.issue_desc)return void this.$toast({message:"请输入问题"});const e={session_id:this.chatInfo.session_id,contact_info:this.leaveInfo.contact_info,issue_desc:this.leaveInfo.issue_desc};try{await X(e)}catch(t){return void(t.status!=C&&this.$toast({message:t.msg}))}this.leaveMessageVisible=!1,this.leaveMessageSuccVisible=!0,await pe(300),this.leaveInfo.contact_info="",this.leaveInfo.issue_desc=""},async onLoad(){},async handleLoadHistoryList(){const e=de(this.chatList).find((e=>e.selfId));let t=await this.getMessage({mode:P.prev,start_message_id:e.message_id});if(t=this.filterMessage(t),!t.length)return this.chatFinished=!0,this.chatRefreshing=!1,void this.chatList.unshift({role:B.marginTip,customId:_e(),content:"暂无更多历史记录~"});this.chatList.unshift(...t),this.addChatTime(this.chatList,!0);const s=document.getElementsByClassName("van-loading van-loading--circular")[0].offsetHeight;this.chatRefreshing=!1;const i=document.querySelector(".chat-container");this.initMoreBtn(),this.$nextTick((()=>{const e=document.getElementById(this.firstMsgId);e.setAttribute("tabindex","1"),e.style.outline="none",i.scrollTop=document.getElementById(`${this.firstMsgId}`).offsetTop-s,this.setFirstMsgId()}))},addChatTime(e,t){let s;if(e.length)if(t){let t=JSON.parse(JSON.stringify(e)).findIndex((e=>e.tips));for(let i=t;i>=0;i--){const a=e[i];if(i===t)s=a.createUnix;else if(a.createUnix&&a.createUnix+300<=s){let t;console.log("超过5分钟=>",he(a.createUnix),e),t=he(a.createUnix,"YYYY-MM-DD")==he(s,"YYYY-MM-DD")?he(a.createUnix,"HH:mm"):he(a.createUnix,"YYYY-MM-DD HH:mm"),e.splice(i,0,{createUnix:a.createUnix,tips:he(a.createUnix),role:B.defaultTip,content:t}),s=a.createUnix}}}else{let t=JSON.parse(JSON.stringify(e)).reverse().findIndex((e=>e.tips));t=t<0?0:e.length-1-t;for(let i=t;i<e.length;i++){const a=e[i];if(i===t)e.splice(i,0,{createUnix:a.createUnix,tips:he(a.createUnix),role:B.defaultTip,customId:_e(),content:he(a.createUnix,"YYYY-MM-DD HH:mm")}),s=a.createUnix;else if(a.createUnix>=s+300){let t;console.log("超过5分钟=>",a.createUnix,s+300,he(a.createUnix),he(s+300)),t=he(a.createUnix,"YYYY-MM-DD")==he(s,"YYYY-MM-DD")?he(a.createUnix,"HH:mm"):he(a.createUnix,"YYYY-MM-DD HH:mm"),e.splice(i,0,{createUnix:a.createUnix,tips:he(a.createUnix),role:B.defaultTip,customId:_e(),content:he(a.createUnix,"YYYY-MM-DD HH:mm")}),s=t}}}},async handleRideSlideChange(){const e=this.rideTabList.tabList[this.rideTabList.tabIndex];console.log("结果=>",e)},async rideOnRefresh(e){console.log("rideOnRefresh=>",e);const t=this.rideTabList.tabList.find((t=>t.value==e.value));t.page=1;try{await this.initRideList({page:t.page,size:t.size,pay_method:t.value,refresh:!0})}catch(s){return s.status!=C&&this.$toast({message:s.msg}),t.refreshing=!1,void(t.finished=!1)}t.refreshing=!1,t.finished=!1},async handleMessageScorll(){},async handleSwitchKf(){if(this.waitInfo.state==Y.inqueue||this.waitInfo.state==Y.success)return;this.chatList.push({role:B.roundTip,customId:_e(),content:"正在为您转接人工客服，请稍后…"}),this.goEnd(null,100);let e=!1;try{const t=await this.msqueueJoin();if(console.log("==========getQueueStatus",t),t.state==Y.success||0==t.in_queue_count)this.chatList.push({role:B.hangUpCard,content:"",customId:_e(),kfId:t.staff_info.user_id,kfname:t.staff_info.nickname,session_id:t.session_id}),this.chatList.push({role:B.staff,contentType:H.text,content:{text:`您好，客服${t.staff_info.nickname}为您服务，请问您有什么需要咨询的问题吗？`},customId:_e(),sendSuss:!0,sendLoading:!1,showMoreBtn:!1,moreId:_e(),kfId:t.staff_info.user_id,kfname:t.staff_info.nickname,kfAvatar:t.staff_info.avatar_url}),e=!0,this.chatInfo.session_id=t.session_id,this.watchChatActive();else if(t.state==Y.inqueue){if(this.waitInfo.in_queue_count===t.in_queue_count)return;this.chatList.push({role:B.roundTip,customId:_e(),content:`在当前排队${t.in_queue_count}人，请稍后…`})}else t.state==Y.fail&&(this.chatList.push({role:B.leaveMsgBtn,customId:_e(),content:"很抱歉，暂时无法为您提供服务，请留言我们会尽快与您取得联系！"}),e=!0);this.goEnd(null,100),this.waitInfo=t}catch(t){return void(t.message==b?(this.chatList.push({role:B.defaultTip,customId:_e(),content:"- 网络异常 请稍后重试 -"}),this.goEnd(null,100)):t.message!=C&&this.$toast({message:t.message}))}e||this.waitSwtichStaff()},async handleSendText(e,t){let s;if(t)s=t;else if(s=document.querySelector(".chat-footer-input").innerHTML,!s)return;console.log("结果content=>",s);const i={role:B.user,contentType:H.text,content:{text:s},sendLoading:!0,sendSuss:!0,customId:_e()};this.chatList.push(i),t||(document.querySelector(".chat-footer-input").innerHTML="",this.chatInputContent=""),this.goEnd(null,100);const a={message:s,type:H.text};let n;try{n=await this.createMessage(a)}catch(o){return void(i.sendSuss=!1)}finally{i.sendLoading=!1}i.sendSuss=!0,n.is_hit_msk&&(this.chatList.push({role:B.switchKfBtn,customId:_e(),content:""}),this.goEnd(null,100)),this.relateIssueLoading||(this.relateIssueLoading=!0,await pe(1e3),this.getRelateIssueList(s))},async msqueueJoin(){console.log("msqueueJoin invoke");const e={session_id:this.chatInfo.session_id};let t;try{t=await se(e)}catch(s){throw s.status!=C&&s.status!=b?new Error(s.msg):new Error(s.status)}return this.chatInfo.session_id=t.session_id,t},async messageQuit(){console.log("messageQuit invoke");const e={session_id:this.chatInfo.session_id};try{await G(e)}catch(t){return}},async sessionHeartbeat(){const e={session_id:this.chatInfo.session_id};try{await j(e)}catch(t){return}},async createMessage(e){const t={session_id:this.chatInfo.session_id,message:e.message,type:e.type};let s;try{s=await W(t)}catch(i){throw new Error(i.msg)}return this.waitInfo.session_id&&this.watchChatActive(),s},async getMessage(e){const t={session_id:this.chatInfo.session_id,mode:e.mode,start_message_id:e.start_message_id,size:k};let s;try{s=await J(t)}catch(i){return[]}return console.log("======getMessage",s),s.message_list=s.message_list.map((e=>({...e,selfId:e.message_id}))),s.message_list},handleIssuesMoreShow(e){e.showMoreBtn=!1;const t=document.getElementById(e.moreId);t.classList.add("act")},handlePicShow(e){this.picSrc=e,this.picVisible=!0},handlePicHide(){this.picVisible=!1,this.picSrc=""},handleLeaveMessageSuccShow(){this.leaveMessageSuccVisible=!0},handleLeaveMessageSuccHide(){this.leaveMessageSuccVisible=!1},async handleRideRecordShow(){this.rideRecordVisible=!0},handleRideRecordHide(){this.rideRecordVisible=!1},setFirstMsgId(){this.chatList=this.chatList.map((e=>(e.id=_e(),e))),this.firstMsgId=this.chatList[0].id},goEnd(e,t=200){this.$nextTick((()=>{setTimeout((()=>{this.$refs.common_chat_main&&(document.getElementsByClassName("chat-messages-item")[document.getElementsByClassName("chat-messages-item").length-1].scrollIntoView({behavior:"auto",block:"end",inline:"nearest"}),e&&e())}),t)}))},handleTouchPage(){},handleInput(e){this.chatInputContent=e.target.innerHTML},handleInputBlur(){let e=navigator.userAgent;e.indexOf("iPhone")>-1&&window.scrollTo(0,0),this.chatInputFocus=!1},handleInputFocus(){this.$nextTick((()=>{this.chatInputFocus=!0}))},handleLeaveMessageShow(){this.leaveMessageVisible=!0},async handleLeaveMessageHide(){this.leaveMessageVisible=!1,await pe(300),this.leaveInfo.contact_info="",this.leaveInfo.issue_desc=""}}}),Ue=Pe,Be=(0,c.Z)(Ue,Se,Re,!1,null,null,null),He=Be.exports,Ne=function(){var e=this;e._self._c;return e._m(0)},Ye=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"error"},[t("div",{staticClass:"error-box"},[t("img",{attrs:{src:s(8288),alt:""}}),t("p",[e._v("页面地址不存在 请联系官方客服")])])])}],Oe={name:"ErrorPage"},De=Oe,Qe=(0,c.Z)(De,Ne,Ye,!1,null,"14f6daa9",null),Ze=Qe.exports;const Ve=d.ZP.prototype.push;d.ZP.prototype.push=function(e,t,s){return t||s?Ve.call(this,e,t,s):Ve.call(this,e).catch((e=>e))},i.ZP.use(d.ZP);const Fe=[{path:"/",name:"home",component:He},{path:"/login",name:"Login",component:Me},{path:"/error",name:"Error",component:Ze}],ze=new d.ZP({routes:Fe});var Ke=ze,qe=(s(5102),s(5110),s(7944),s(5650)),Ge=(s(4346),s(888)),je=(s(7580),s(7937)),We=(s(6791),s(4269)),Je=(s(3429),s(7722)),Xe=(s(4889),s(5705)),$e=(s(5825),s(9858)),et=(s(109),s(6142)),tt=(s(8778),s(5910)),st=(s(9571),s(4958)),it=(s(3772),s(2778)),at=(s(2443),s(9864)),nt=(s(2699),s(8799)),ot=(s(4439),s(3462)),rt=(s(5657),s(9538)),ct=(s(4735),s(6471)),lt=(s(3089),s(4398)),ut=(s(8146),s(8848)),dt=(s(5816),s(9387)),ht=(s(2679),s(9054)),mt=(s(836),s(6811)),ft=(s(446),s(7847)),gt=(s(2763),s(5094)),pt=(s(6735),s(4319)),_t=(s(3412),s(7740));i.ZP.use(_t.Z),i.ZP.use(pt.Z),i.ZP.use(gt.Z),i.ZP.use(ft.Z),i.ZP.use(mt.Z),i.ZP.use(ht.Z),i.ZP.use(dt.Z),i.ZP.use(ut.Z),i.ZP.use(lt.Z),i.ZP.use(ct.Z),i.ZP.use(rt.Z),i.ZP.use(ot.Z),i.ZP.use(nt.Z),i.ZP.use(at.Z),i.ZP.use(it.Z),i.ZP.use(st.Z),i.ZP.use(tt.Z),i.ZP.use(et.Z),i.ZP.use($e.Z),i.ZP.use(Xe.Z),i.ZP.use(Je.Z),i.ZP.use(We.Z),i.ZP.use(je.Z),i.ZP.use(Ge.Z),i.ZP.use(qe.Z);var vt=s(7634),At=s.n(vt);const It=At().Random;At().setup({timeout:300}),At().mock("/kfh5/user/login","post",{code:0,msg:"success",data:{token:"token",token_expire_unix:1697384212,token_refresh_unix:1697298412}}),At().mock("/kfh5/user/token/refresh","post",{code:0,msg:"success",data:{token:"token",token_expire_unix:1697384212,token_refresh_unix:1697298412}}),At().mock("/kfh5/user/profile","post",{code:0,msg:"success",data:{user_id:It.natural(),nickname:"assets",avatar_url:It.image("80x80")}}),At().mock("/kfh5/message/session/init","post",{code:0,msg:"success",data:{session_id:It.natural(),state:"ROBOT",in_queue_count:1,staff_info:{user_id:It.natural(),nickname:"客服昵称"+It.natural(),avatar_url:It.image("80x80")},chat_window:{name:"聊天窗名称",notes:"备注",welcome_message:"欢迎语",prompt:"请输入您想咨询的问题…",robot:{nickname:"机器人名称",avatar_url:It.image("80x80")}}}}),At().mock("/kfh5/message/session/quit","post",{code:0,msg:"success",data:{}}),At().mock("/kfh5/message/session/heartbeat","post",{code:0,msg:"success",data:{}}),At().mock("/kfh5/message/send","post",{code:30,msg:"success",data:{message_id:It.natural(),create_unix:1697384212,is_hit_msk:!0}}),At().mock("/kfh5/message/pull","post",{code:0,msg:"success",data:{message_list:[{message_id:It.natural(),content:{text:"。地能开具票一般是在乘坐地铁后的第一天了才能开票，而如果经常地铁通勤，可以选择一个月一次性开多张发票，最晚不能超过三个月一般情况就开不来地铁发票了。地铁乘车不能累计开发票。地能开具票一般是在乘坐地铁后的第一天了才能开票，而如果经常地铁通勤，可以选择一个月一次性开多张发票，最晚不能超过三个月一般情况就开不来地铁发票了。地铁乘车不能累计开发票",image:It.image("80x80"),ride_record:{id:"1",start_station:"起点站",terminal:"终点站",pay_unix:1688609733,amount:1}},staff_info:{"user_id|1":[0,1],nickname:"客服昵称"+It.natural(),avatar_url:It.image("80x80")},"belong_to|1":["STAFF","USER"],"message_type|1":["TEXT","IMAGE","RIDE_RECORD"],"state|1":["NORMAL","RECALL"],create_unix:1698939641},{message_id:It.natural(),content:{text:"。地能开具票一般是在乘坐地铁后的第一天了才能开票，而如果经常地铁通勤，可以选择一个月一次性开多张发票，最晚不能超过三个月一般情况就开不来地铁发票了。地铁乘车不能累计开发票。地能开具票一般是在乘坐地铁后的第一天了才能开票，而如果经常地铁通勤，可以选择一个月一次性开多张发票，最晚不能超过三个月一般情况就开不来地铁发票了。地铁乘车不能累计开发票",image:"https://dummyimage.com/150x150",ride_record:{id:"3",start_station:"起点站",terminal:"终点站",pay_unix:1688609733,amount:1}},staff_info:{"user_id|1":[0,1],nickname:"客服昵称"+It.natural(),avatar_url:It.image("80x80")},"belong_to|1":["STAFF","USER"],"message_type|1":["TEXT","IMAGE","RIDE_RECORD"],"state|1":["NORMAL","RECALL"],create_unix:1698939701}]}}),At().mock("/kfh5/message/leave","post",{code:0,msg:"success",data:{}}),At().mock("/kfh5/message/msqueue/query","post",{code:0,msg:"success",data:{"session_id|1-100000":1,"in_queue_count|1-100000":1,"state|1":["SUCCESS"],staff_info:{user_id:It.natural(),nickname:"客服昵称",avatar_url:s(2227)}}}),At().mock("/kfh5/message/msqueue/hand-up","post",{code:0,msg:"success",data:{}}),At().mock("/kfh5/message/msqueue/evaluate","post",{code:0,msg:"success",data:{}}),At().mock("/kfh5/message/msqueue/join","post",{code:0,msg:"success",data:{session_id:It.natural(),in_queue_count:1,"state|1":["INQUEUE"],staff_info:{user_id:It.natural(),nickname:"客服昵称",avatar_url:s(2227)}}}),At().mock("/kfh5/message/banner/one","post",{code:0,msg:"success",data:{image_url:"https://img01.yzcdn.cn/vant/apple-1.jpg"}}),At().mock("/kfh5/message/issue/hot/list","post",{code:0,msg:"success",data:{icon_url:s(9888),"issue_list|10":[{"id|1-1000000":1,content:"热门问题热门问题热门问题"+It.natural()}]}}),At().mock("/kfh5/message/issue/relate/list","post",{code:0,msg:"success",data:{"issue_list|10":[{id:It.natural(),content:"关联问题关联问题关联问题"}]}}),At().mock("/kfh5/message/order/riding/list","post",{code:0,msg:"success",data:{"riding_list|10":[{id:It.natural(),start_station:"起始站",terminal:"终点站","amount|0-100":23,pay_method:"支付方式",pay_unix:1688609733}]}}),At().mock("/kfh5/message/filemanager/upload/apply","post",{code:0,msg:"success",data:{file_id:It.natural(),upload_url:"",hit:!0}}),At().mock("/kfh5/message/filemanager/upload/success","post",{code:0,msg:"success",data:{file_id:It.natural(),"filename|IMAGE":["ATTACHMENT","IMAGE"],file_type:"string",filename:"文件名",md5:"string",content_type:"string","size|0-100":23,download_url:"string"}}),i.ZP.config.productionTip=!1,new i.ZP({router:Ke,render:e=>e(u)}).$mount("#app")},5102:function(){(function(e,t){var s=t.documentElement,i=e.devicePixelRatio||1;function a(){t.body?t.body.style.fontSize=12*i+"px":t.addEventListener("DOMContentLoaded",a)}function n(){var e=s.clientWidth/10;s.style.fontSize=e+"px"}if(a(),n(),e.addEventListener("resize",n),e.addEventListener("pageshow",(function(e){e.persisted&&n()})),i>=2){var o=t.createElement("body"),r=t.createElement("div");r.style.border=".5px solid transparent",o.appendChild(r),s.appendChild(o),1===r.offsetHeight&&s.classList.add("hairlines"),s.removeChild(o)}})(window,document)},8288:function(e,t,s){"use strict";e.exports=s.p+"img/404.50f167db.png"},2227:function(e){"use strict";e.exports="data:image/png;base64,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"},7945:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGqADAAQAAAABAAAAGgAAAABMybYKAAADIElEQVRIDb1WW0tiURRe2ilJKRkxIsGoQC0QhIzeesjquWD+y/yH6Xn+xkDzXGMPPck0oGKFFUFWDtFlwJcSb/N9O/cZT55TZ64LNvu21rf22ntdtkdeoZ2dnThYNtDW0CbRImikKloFbRtta3V19Ri9I3mcdrLZbLrdbm/6fL7M2NiYhMNhGR4eFsyVSL1el4eHB7m9vZWbmxvBPOv1et9lMpmvTpiW9U6nY8CKD3t7e+2rqytM3RF5KUNZSBgWUEwsFoHxDU72EadfTiaTMjAw8Jz/xXmr1ZJSqUQrd2H526Wlpe9awKsHPAWVRKPR5VQq9ctKiMODUZYYxLKzTGhyPp93d08uuIhFTG2I6vnwvN9ms+kCwh0LsYhJbCpRj0bvmpmZ8fS+ycXFhTQaDcuBXpsMDg7y2hQbsYh5dHS0iYUVAxoTYMhEIjo8nuDK5bKMj4+7fis6wvX1tamIKMQ8OzvL4ArjBqxZZ5zYUSwWE8MwhNYFg0EJhUJ2bGrt8fFRKXrOQOzLy8sNet0ag9GJqIQgh4eHgkM5sTmud7HXqGiSEe9EtOTu7k4CgYAg8k02ZoWTkxNz7jToYk/SGSI6rdgx87rS6bRKP3ofHiVwX+G70AGmpqb0Vl/fxY78PGIfy9NCpVKR/f195jK1AOeWYrGoct/i4iLvX+U6B3G93KGiqgbRq7pnwjw/P5eJiQnTAnojXZeOMjQ0pDIBXFhqtZoWs/Rd7G+8ugruO+73+y0MnJyensr8/LyMjo6qmMrlckrJwsKCyTsyMiJzc3NycHBgrvUO+JagCi3a5sntaHZ2Vinhnh7b5UG68PT0tB2EKiPY2DbgSZ9QT94nEok+RtaZ+/t7c51ehwA0570DOoYdEQO0pcoEIvczzLdkhz9NQUSvVquC98ui+q6oXMfKiJN+Qcox853OWRT4HaKFwOwQ2yL/X8oENSI+WMKzcF93deAFLmIQi5jaGjNgPR5Pk+UXb7NbKBRU1Gsmtz2vi7LEIBYxHWW7lv3bz0mvdlZGZOu/9t2y/IJ6FekxCyMUrmPu+IFkLOI/V9Yydv0PUnwd+L26wAgAAAAASUVORK5CYII="},7726:function(e){"use strict";e.exports="data:image/png;base64,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"},8773:function(e,t,s){"use strict";e.exports=s.p+"img/5.464e9d54.png"},9888:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAEKADAAQAAAABAAAAEAAAAAA0VXHyAAACGUlEQVQ4EaVSvWvTURS99700TWMHBV2E6uAXLYI4VHBwECddTMCoUBIFIYNYR/0zBB1EoaLVqjRQSQcRBKU4ulUFqYqKBcFB7dCkCb53PDfxhba49Q6/+33uuff3RDYour4f1Wq+9WP5AkQLAtkBkUFVeSOKuVwmd1NrEz9X96wBaBQrhxXhESA7Vxclm0BLTv25/ieT9V4sGe1C5VBAfAHBphT7n+ZEiPfHBmYmX1re2Qfj4/1B4v3UrOrueC8lFZ3i1GA1SbiSSgz3UDi/2WIdgObi7yKAvalIgLOifkGdLPIWZQK1OPl9ynPFoaaEag9AI06mpGmovJMQ98SIqyQ8SqAbLtNXJJuHqU6Bo2Z3VxDZnRKmM+IuBeC62aq4THbPEP8MKdyUxUw4ZNR0B4DITXNMVPVTUBygud180vXich+pT8FhC0O/LK6ChukOAGl+NqcriNw3y70bKn7MYoitK2RRhfovdA2Eot/s22XgZdqcruguRMyT4t1cdnCWhfOkcZEj6y6E/amKx50xm8M4oTTtm+3Z17QOdoKqC+RdjhJOQ9xbvkJlQ5PHnuCvznPP7wN9+WGt3V7qAFhTqzQ2EtoyR3Or+SZcY5lMnrN7mI37/sVWxLsT6SH1ACzZKpaHI3CL+x4xf73w2F95/vJA/cGrlFsDkIIrhcpxSDzDVzfCWJZH/sC38DSX2fZYa9d6fyzVb0j/BWjry5Lzz59vAAAAAElFTkSuQmCC"},5819:function(){}},t={};function s(i){var a=t[i];if(void 0!==a)return a.exports;var n=t[i]={exports:{}};return e[i].call(n.exports,n,n.exports,s),n.exports}s.m=e,function(){var e=[];s.O=function(t,i,a,n){if(!i){var o=1/0;for(u=0;u<e.length;u++){i=e[u][0],a=e[u][1],n=e[u][2];for(var r=!0,c=0;c<i.length;c++)(!1&n||o>=n)&&Object.keys(s.O).every((function(e){return s.O[e](i[c])}))?i.splice(c--,1):(r=!1,n<o&&(o=n));if(r){e.splice(u--,1);var l=a();void 0!==l&&(t=l)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[i,a,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.p="./"}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,n,o=i[0],r=i[1],c=i[2],l=0;if(o.some((function(t){return 0!==e[t]}))){for(a in r)s.o(r,a)&&(s.m[a]=r[a]);if(c)var u=c(s)}for(t&&t(i);l<o.length;l++)n=o[l],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(u)},i=self["webpackChunkh5"]=self["webpackChunkh5"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998],(function(){return s(1983)}));i=s.O(i)})();
//# sourceMappingURL=app.e6101322.js.map